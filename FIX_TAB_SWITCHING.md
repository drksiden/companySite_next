# Решение проблемы с переключением вкладок браузера

## Проблема
При переключении вкладок браузера (когда вы уходите на другую вкладку и возвращаетесь) происходит проверка авторизации и форма закрывается/перезагружается.

## Причина
Supabase автоматически проверяет авторизацию при переключении вкладок браузера через `onAuthStateChange`, что вызывает перезагрузку компонентов.

## Быстрое решение

### Способ 1: Переменная окружения
Создайте или отредактируйте файл `.env.local` в корне проекта:
```
NEXT_PUBLIC_DISABLE_AUTH=true
```

Перезапустите сервер:
```bash
npm run dev
```

### Способ 2: Отключение в коде
В файле `src/components/admin/AdminAuthGuard.tsx` найдите строку:
```typescript
}: AdminAuthGuardProps) {
```

И добавьте сразу после неё:
```typescript
// Временное отключение для разработки
if (process.env.NODE_ENV === "development") {
  return <>{children}</>;
}
```

## Проверка
1. Откройте форму товара в админке
2. Переключитесь на другую вкладку браузера
3. Вернитесь к вкладке с формой
4. Форма должна остаться открытой

## Что было исправлено
- Отключена подписка на `supabase.auth.onAuthStateChange`
- Добавлена возможность полного отключения проверок в dev режиме
- Убрана автоматическая перезагрузка при переключении вкладок

## Важно
⚠️ **Обязательно включите проверки обратно перед деплоем в продакшн!**

Удалите переменную `NEXT_PUBLIC_DISABLE_AUTH=true` из `.env.local` или уберите код отключения.

## Альтернативное решение
Если проблема остается, временно работайте в режиме инкогнито или используйте другой браузер для поиска информации, чтобы не переключаться между вкладками.