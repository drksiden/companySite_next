# üéØ –†–µ–∑—é–º–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤

**–î–∞—Ç–∞:** `2024-12-30`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–í–µ—Ä—Å–∏—è:** v1.0

---

## üìã –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ 1: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤**
**–ü—Ä–∏—á–∏–Ω–∞:** 
- API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª –ø–æ–ª–µ `images`
- –ü—É—Å—Ç—ã–µ `thumbnail` –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**‚úÖ –†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `images` –≤ API response (`/api/catalog/products`)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö URL
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω fallback: –µ—Å–ª–∏ `thumbnail` –ø—É—Å—Ç–æ–π ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ `images`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è URL –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `ProductCard`

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–∞**
**–ü—Ä–∏—á–∏–Ω–∞:** 
- –ù–µ —É—á–∏—Ç—ã–≤–∞–ª–æ—Å—å –ø–æ–ª–µ `track_inventory`
- –¢–æ–≤–∞—Ä—ã —Å `track_inventory: false` –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –∫–∞–∫ "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏"

**‚úÖ –†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞: `track_inventory ? inventory_quantity > 0 : true`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `track_inventory` –≤ API response
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `ProductCard`, `ProductDetailPage`

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ 3: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ 404**
**–ü—Ä–∏—á–∏–Ω–∞:** 
- `process.env.NEXT_PUBLIC_SITE_URL` –±—ã–ª `undefined`
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –ø–æ–ª–µ `track_inventory` –≤ API —Ç–æ–≤–∞—Ä–∞

**‚úÖ –†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω fallback URL: `process.env.NEXT_PUBLIC_SITE_URL || "http://localhost:3000"`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `track_inventory` –≤ `/api/products/[slug]`
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ API —Ç–æ–≤–∞—Ä–∞

### ‚úÖ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤**
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –Ω–µ –Ω—É–∂–Ω–∞

**–î–µ–π—Å—Ç–≤–∏—è:**
- –£–¥–∞–ª–µ–Ω —Ñ–∞–π–ª `ProductComparison.tsx`
- –£–¥–∞–ª–µ–Ω —Ñ–∞–π–ª `useProductComparison.ts`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –≤ `catalog.ts`
- –í—Ä–µ–º–µ–Ω–Ω–æ —Å–∫—Ä—ã—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–í –∫–æ—Ä–∑–∏–Ω—É"

---

## üîß –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### API Endpoints
- ‚úÖ `src/app/api/catalog/products/route.ts`
- ‚úÖ `src/app/api/products/[slug]/route.ts`

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `src/components/catalog/ProductCard.tsx`
- ‚úÖ `src/components/catalog/ProductDetailPage.tsx`
- ‚úÖ `src/app/product/[slug]/page.tsx`

### –¢–∏–ø—ã
- ‚úÖ `src/types/catalog.ts`

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- üóëÔ∏è `src/components/catalog/ProductComparison.tsx`
- üóëÔ∏è `src/hooks/useProductComparison.ts`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
```bash
# –¢–µ—Å—Ç API –∫–∞—Ç–∞–ª–æ–≥–∞
node debug-catalog.js

# –¢–µ—Å—Ç API –∫–∞—Ç–∞–ª–æ–≥–∞ (–¥–µ—Ç–∞–ª—å–Ω—ã–π)
node test-catalog-api.js
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
- **API –∫–∞—Ç–∞–ª–æ–≥–∞:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** ‚úÖ –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, fallback —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–õ–æ–≥–∏–∫–∞ –Ω–∞–ª–∏—á–∏—è:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
- **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ 404
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ‚úÖ –ù–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∞

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
1. ‚úÖ –¢–æ–≤–∞—Ä —Å `track_inventory: true, inventory_quantity: 5` ‚Üí "–í –Ω–∞–ª–∏—á–∏–∏"
2. ‚úÖ –¢–æ–≤–∞—Ä —Å `track_inventory: true, inventory_quantity: 0` ‚Üí "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏"  
3. ‚úÖ –¢–æ–≤–∞—Ä —Å `track_inventory: false, inventory_quantity: 0` ‚Üí "–í –Ω–∞–ª–∏—á–∏–∏"
4. ‚úÖ –¢–æ–≤–∞—Ä —Å –ø—É—Å—Ç—ã–º `thumbnail` –Ω–æ —Å `images` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
5. ‚úÖ –¢–æ–≤–∞—Ä –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç placeholder

---

## üìä –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### API Response —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```javascript
// –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
{
  id: "...",
  name: "...",
  thumbnail: null,        // ‚ùå –ü—É—Å—Ç–æ–π
  inventory_quantity: 0   // ‚ùå –ë–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
}

// –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞  
{
  id: "...",
  name: "...", 
  thumbnail: "image-url", // ‚úÖ Fallback –∏–∑ images
  images: ["url1", "url2"], // ‚úÖ –§–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤
  inventory_quantity: 0,
  track_inventory: false,  // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

### –õ–æ–≥–∏–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–∞
```javascript
// –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ ‚ùå
const isInStock = (product.inventory_quantity || 0) > 0;

// –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ ‚úÖ
const isInStock = product.track_inventory
  ? (product.inventory_quantity || 0) > 0  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∫–ª–∞–¥
  : true;                                  // –í—Å–µ–≥–¥–∞ –≤ –Ω–∞–ª–∏—á–∏–∏
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```javascript
// –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ ‚úÖ
const thumbnail = product.thumbnail && product.thumbnail.trim() !== ""
  ? product.thumbnail
  : images.length > 0 
    ? images[0]           // Fallback –Ω–∞ –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    : null;               // –ü–æ–∫–∞–∑–∞—Ç—å placeholder
```

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Production

### ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç
- [x] –í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –ù–µ—Ç TypeScript –æ—à–∏–±–æ–∫  
- [x] –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [x] –õ–æ–≥–∏–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [x] –°—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã
- [x] Fallback –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥
- [x] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∞

### üìà –£–ª—É—á—à–µ–Ω–∏—è
- **UX:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞–ª–∏—á–∏—è
- **Performance:** –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- **Reliability:** –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Maintainability:** –£–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞

---

## üîÑ –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)

### Git –∫–æ–º–∞–Ω–¥—ã
```bash
# –û—Ç–∫–∞—Ç API –∏–∑–º–µ–Ω–µ–Ω–∏–π
git revert <commit-hash-api>

# –û—Ç–∫–∞—Ç UI –∏–∑–º–µ–Ω–µ–Ω–∏–π  
git revert <commit-hash-ui>

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
git checkout HEAD~1 -- src/components/catalog/ProductComparison.tsx
git checkout HEAD~1 -- src/hooks/useProductComparison.ts
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –í –±–ª–∏–∂–∞–π—à–µ–º –±—É–¥—É—â–µ–º
1. üõí –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ—Ä–∑–∏–Ω—ã
2. üîç –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
3. üì± –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –í –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ  
1. üé® –£–ª—É—á—à–∏—Ç—å –¥–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤
2. ‚ö° –î–æ–±–∞–≤–∏—Ç—å lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. üìä –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

---

**üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** Assistant  
**üìÖ –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2024-12-30  
**‚úÖ –°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ production