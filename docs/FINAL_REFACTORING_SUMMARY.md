# –§–ò–ù–ê–õ–¨–ù–ê–Ø –°–í–û–î–ö–ê –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

## üéØ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Next.js 14 –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é. –ü—Ä–æ–µ–∫—Ç —É–ø—Ä–æ—â–µ–Ω, –æ—á–∏—â–µ–Ω –æ—Ç –¥—É–±–ª–µ–π, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–ù–ê–õ–ò–ó–ê

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Next.js 14 App Router —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º server/client
- **TypeScript**: strict mode –≤–∫–ª—é—á–µ–Ω, –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ—Ö–æ–¥—è—Ç typecheck
- **Supabase**: —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã, –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ client/server/admin
- **R2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞, –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π**: —á–µ—Ç–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –≤ src/lib/services/
- **API —Ä–æ—É—Ç—ã**: —Ç–æ–Ω–∫–∏–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–µ—Ä–≤–∏—Å—ã
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ features/catalog/

### üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
1. **–û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**:
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å brands: `website_url` ‚Üí `website`
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ö–µ–º—É
   - –£–ø—Ä–æ—â–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

2. **–û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–µ–π** (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ):
   - –£–¥–∞–ª–µ–Ω—ã `src/utils/supabase/**` 
   - –£–¥–∞–ª–µ–Ω—ã `src/utils/r2/**`
   - –£–¥–∞–ª–µ–Ω—ã `src/features/catalog/api/**`
   - –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —É—Ç–∏–ª–∏—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
   - package.json: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω postinstall —Å–∫—Ä–∏–ø—Ç
   - ESLint: –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
   - TypeScript: –≤—Å–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏—é

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### –ö–†–ò–¢–ò–ß–ù–û - –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
1. **R2 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env.local**:
   ```env
   R2_ACCESS_KEY_ID=your-key
   R2_SECRET_ACCESS_KEY=your-secret
   R2_ENDPOINT=https://account-id.r2.cloudflarestorage.com
   R2_PUBLIC_BUCKET=bucket-name
   R2_PUBLIC_BASE_URL=https://pub-xxx.r2.dev
   R2_UPLOAD_MAX_MB=20
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Supabase**:
   - –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ supabase/migrations/
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —Å—Ö–µ–º–∞ –ë–î —Ñ–∞–π–ª—É supabase_architecture.md
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞

#### –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:
```bash
rm src/components/catalog/CatalogPage.tsx
rm src/components/catalog/EnhancedProductDetailPage.tsx  
rm src/components/ImageUpload.tsx
rm src/components/ImageUploadOptimized.tsx
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç
```bash
# –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
node test-catalog-quick.js
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
1. `pnpm dev` - —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. http://localhost:3000/catalog - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è
3. –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å
4. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–≤–µ—á–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìã ARCHITECTURE COMPLIANCE

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¢–ó
- **Next.js 14 App Router**: ‚úÖ
- **TypeScript strict**: ‚úÖ  
- **shadcn/ui + Tailwind**: ‚úÖ
- **Supabase —Å RLS**: ‚úÖ
- **Cloudflare R2 —Å presigned URLs**: ‚úÖ
- **–ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π**: ‚úÖ
- **–°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞**: ‚úÖ
- **Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è**: ‚úÖ
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: ‚úÖ

### üìÅ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
src/
  app/
    api/
      catalog/{products,categories,brands}/route.ts  ‚úÖ
      upload/route.ts                                ‚úÖ 
      images/optimize/route.ts                       ‚úÖ
    catalog/page.tsx                                 ‚úÖ Server Component
  features/
    catalog/components/                              ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
      CatalogShell.tsx, ProductGrid.tsx –∏ –¥—Ä.
    upload/ImageUploader.tsx                        ‚úÖ Presigned upload
  lib/
    services/{catalog,product,brand}.ts              ‚úÖ –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
    r2.ts                                           ‚úÖ R2 –∫–ª–∏–µ–Ω—Ç
    supabaseClient.ts + supabaseServer.ts           ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
    schemas.ts                                      ‚úÖ Zod —Å—Ö–µ–º—ã
  types/catalog.ts                                  ‚úÖ –¢–∏–ø—ã
```

## üéâ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø

### –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è
- –£–¥–∞–ª–µ–Ω–æ **15+ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è —Ñ–∞–π–ª–æ–≤**
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç—ã Supabase –∏ R2
- –£–ø—Ä–æ—â–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å—Ö–µ–º—ã –ë–î

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- Server Components –¥–ª—è SEO –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Client Components —Ç–æ–ª—å–∫–æ –≥–¥–µ –Ω—É–∂–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å  
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ server/client –∫–æ–¥–∞
- Presigned URLs –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

### Developer Experience
- TypeScript strict –±–µ–∑ –æ—à–∏–±–æ–∫
- ESLint –Ω–∞—Å—Ç—Ä–æ–µ–Ω (19 warnings, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø–ª–∞–Ω—ã –¥–µ–π—Å—Ç–≤–∏–π
- –ì–æ—Ç–æ–≤—ã–µ —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç—ã

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞:
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env.local** —Å R2 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Supabase –º–∏–≥—Ä–∞—Ü–∏–∏**
3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã**: `node test-catalog-quick.js`
4. **–£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è  
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (RLS, presigned URLs)
- ‚úÖ SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (Server Components)
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

## üìä –ú–ï–¢–†–ò–ö–ò –£–õ–£–ß–®–ï–ù–ò–Ø

| –ê—Å–ø–µ–∫—Ç | –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ |
|--------|----------------|-------------------|
| –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ–∞–π–ª—ã | 15+ | 0 |
| TypeScript –æ—à–∏–±–∫–∏ | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ | 0 |
| Supabase –∫–ª–∏–µ–Ω—Ç—ã | –ù–µ—Å–∫–æ–ª—å–∫–æ | 2 —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö |
| R2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –ß–∞—Å—Ç–∏—á–Ω–∞—è | –ü–æ–ª–Ω–∞—è |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ | –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è | –°–µ—Ä–≤–µ—Ä–Ω–∞—è + –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è (–µ—Å—Ç—å —Ç–µ—Å—Ç—ã) |

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ** –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¢–ó:
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –∏ –æ—á–∏—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞  
- ‚úÖ –£–±—Ä–∞–Ω—ã –≤—Å–µ –¥—É–±–ª–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ R2
- ‚úÖ –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–∞—Ç–∞–ª–æ–≥
- ‚úÖ –°–æ–±–ª—é–¥–µ–Ω—ã –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ Next.js 14

**–í—Ä–µ–º—è –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ**: 1-2 —á–∞—Å–∞ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ .env.local + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ì–æ—Ç–æ–≤—ã–π –∫ production —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π e-commerce –ø—Ä–æ–µ–∫—Ç —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.